* [Back to contents](../Readme.md#contents)

### **Summary of Invoice API Endpoints**


| # | Endpoint                                                                 | Method | Purpose                                                |
|---|--------------------------------------------------------------------------|--------|--------------------------------------------------------|
| 1 | [`/v1/invoices/create`](#1-create-invoice)                                                   | ![POST](https://img.shields.io/badge/-POST-green?style=for-the-badge) | Create a new invoice.                                 |
| 2 | [`/v1/invoices/{invoiceID}`](#2-get-invoice-info)                                             | ![GET](https://img.shields.io/badge/-GET-blue?style=for-the-badge)  | Fetch detailed info about a specific invoice.         |
| 3 | [`/v1/instrument-settings/payment-methods/available-for-application/{ID}`](#3-get-available-payment-methods) | ![GET](https://img.shields.io/badge/-GET-blue?style=for-the-badge)  | Get available payment methods for a specific project. |



## **1. Create Invoice**


#### **Endpoint:**

![POST](https://img.shields.io/badge/-POST-green?style=for-the-badge)

```shell

https://api.payop.com/v1/invoices/create

```



#### **Purpose:**



* **This API is used to create an invoice for processing payments.**
* **The payer will be redirected to either the checkout page or a specific payment method, based on the request parameters.**


#### **How It Works:**



* **A <code>POST</code> request is sent with order details, payer information, and payment preferences.**
* **Optionally, a specific payment method ID can be provided to redirect the payer directly to that method.**


#### **Key Parameters:**

<table>
  <tr>
   <td><strong>Parameter</strong></td>
   <td><strong>Type</strong></td>
   <td><strong>Description</strong></td>
   <td><strong>Required</strong></td>
  </tr>
  <tr>
   <td><code>publicKey</code></td>
   <td><code>string</code></td>
   <td>Public key issued in the project.</td>
   <td>‚úÖ</td>
  </tr>
  <tr>
   <td><code>order</code></td>
   <td><code>JSON object</code></td>
   <td>Order details.</td>
   <td>‚úÖ</td>
  </tr>
  <tr>
   <td><code>order.id</code></td>
   <td><code>string</code></td>
   <td>Payment ID.</td>
   <td>‚úÖ</td>
  </tr>
  <tr>
   <td><code>order.amount</code></td>
   <td><code>string</code></td>
   <td>Payment amount.</td>
   <td>‚úÖ</td>
  </tr>
  <tr>
   <td><code>order.currency</code></td>
   <td><code>string</code></td>
   <td>Payment currency.</td>
   <td>‚úÖ</td>
  </tr>
  <tr>
   <td><code>order.description</code></td>
   <td><code>string</code></td>
   <td>Description of payment.</td>
   <td>‚ùå</td>
  </tr>
  <tr>
   <td><code>order.items</code></td>
   <td><code>json array</code></td>
   <td>List of products/services.</td>
   <td>‚ùå</td>
  </tr>
  <tr>
   <td><code>payer</code></td>
   <td><code>JSON object</code></td>
   <td>Payer details.</td>
   <td>‚úÖ</td>
  </tr>
  <tr>
   <td><code>payer.email</code></td>
   <td><code>string</code></td>
   <td>Payer email.</td>
   <td>‚úÖ</td>
  </tr>
  <tr>
   <td><code>language</code></td>
   <td><code>string</code></td>
   <td>Language of the checkout page (e.g., <code>en</code>, <code>ru</code>).</td>
   <td>‚ùå</td>
  </tr>
  <tr>
   <td><code>resultUrl</code></td>
   <td><code>string</code></td>
   <td>URL for successful payment redirection.</td>
   <td>‚ùå</td>
  </tr>
  <tr>
   <td><code>failPath</code></td>
   <td><code>string</code></td>
   <td>URL for failed payment redirection.</td>
   <td>‚ùå</td>
  </tr>
  <tr>
   <td><code>signature</code></td>
   <td><code>string</code></td>
   <td>SHA-256 hash for security verification.</td>
   <td>‚úÖ</td>
  </tr>
  <tr>
   <td><code>paymentMethod</code></td>
   <td><code>string</code></td>
   <td>Specific payment method ID.</td>
   <td>‚ùå</td>
  </tr>
  <tr>
   <td><code>metadata</code></td>
   <td><code>JSON object</code></td>
   <td>Additional data for merchant use.</td>
   <td>‚ùå</td>
  </tr>
</table>


#### **Request Example:**


```shell
curl -X POST "https://api.payop.com/v1/invoices/create" \
 -H "Content-Type: application/json" \
 -d '{
   "publicKey": "YOUR_PUBLIC_KEY",
   "order": {
       "id": "12345",
       "amount": "3",
       "currency": "EUR",
       "items": [
           {
               "id": "487",
               "name": "Item 1",
               "price": "0.90"
           },
           {
               "id": "358",
               "name": "Item 2",
               "price": "2.10"
           }
       ],
       "description": "Test Payment"
   },
   "signature": "GENERATED_SIGNATURE", // Signature generated by secret key, invoice amount, invoice currency, invoice id
   "payer": {
       "email": "test.user@payop.com"
   },
   "paymentMethod": 261,
   "language": "en",
   "resultUrl": "https://your.site/result",
   "failPath": "https://your.site/fail"
}'

```


#### **Successful Response Example:**


```json
{
   "data": "ec2aa893-e7f5-4a0d-98c4-ef1a424eaf5d",
   "status": 1
}

```


> üßæ **Please Note:**
>* **The invoice identifier is returned in the <code>identifier</code> header.**
>* **Do not use the identifier in the response body (it will be removed in future API versions).**


#### **Error Response Example (Wrong Signature):**


```json
{
 "message": "Wrong signature"
}

```


## **2. Get Invoice Info**


#### **Endpoint:**

![GET](https://img.shields.io/badge/-GET-blue?style=for-the-badge)

```shell
https://api.payop.com/v1/invoices/{invoiceID}
```


#### **Purpose:**


* **Retrieves detailed information about a specific invoice.**
* **Includes invoice status, payer details, items, and associated transaction.**


#### **How It Works:**



* **A <code>GET</code> request is sent with the invoice ID.**
* **The response contains invoice status, amount, payment method, and metadata.**


#### **Request Example:**


```shell
curl -X GET "https://api.payop.com/v1/invoices/{invoiceID}" \
 -H "Content-Type: application/json"

```


#### **Successful Response Example:**


```json
{
   "data": {
       "identifier": "81962ed0-a65c-4d1a-851b-b3dbf9750399",
       "status": 0,
       "type": 1,
       "amount": 3,
       "currency": "EUR",
       "orderIdentifier": "test",
       "items": [
           {
               "id": "487",
               "name": "Item 1",
               "price": "0.90"
           },
           {
               "id": "358",
               "name": "Item 2",
               "price": "2.10"
           }
       ],
       "resultUrl": "https://your.site/result",
       "failUrl": "https://your.site/fail",
       "payer": {
           "email": "test.user@payop.com"
       },
       "paymentMethod": {
           "identifier": 261,
           "formType": "standard"
       },
       "createdAt": 1567754398
   },
   "status": 1
}

```


#### **Error Response Example (Invoice Not Found):**


```json
{
 "message": "Invoice (Invoice_ID) not found"
}

```


** **


#### **Possible Invoice Statuses:**


<table>
  <tr>
   <td>Status
   </td>
   <td>Type
   </td>
   <td>Description
   </td>
  </tr>
  <tr>
   <td>0
   </td>
   <td>New
   </td>
   <td>Invoice created but no action taken.
   </td>
  </tr>
  <tr>
   <td>1
   </td>
   <td>Paid
   </td>
   <td>Invoice was successfully paid.
   </td>
  </tr>
  <tr>
   <td>2
   </td>
   <td>Overdue
   </td>
   <td>Invoice expired (default expiration is 24 hours).
   </td>
  </tr>
  <tr>
   <td>4
   </td>
   <td>Pending
   </td>
   <td>Invoice is awaiting payment.
   </td>
  </tr>
  <tr>
   <td>5
   </td>
   <td>Failed
   </td>
   <td>Payment failed (technical or financial issues).
   </td>
  </tr>
</table>


## **3. Get Available Payment Methods**


#### **Endpoint:**

![GET](https://img.shields.io/badge/-GET-blue?style=for-the-badge)

```shell
https://api.payop.com/v1/instrument-settings/payment-methods/available-for-application/{ID}
```



#### **Purpose:**



* **Returns available payment methods for a given application.**
* **Only these payment methods can be used to create an invoice.**


#### **How It Works:**



* **A <code>GET</code> request is sent with the application ID.**
* **The response includes available payment methods, supported currencies, and country restrictions.**


#### **Request Example:**


```shell
curl -X GET "https://api.payop.com/v1/instrument-settings/payment-methods/available-for-application/{APPLICATION_ID}" \
 -H "Content-Type: application/json" \
 -H "Authorization: Bearer YOUR_JWT_TOKEN"
```




#### **Successful Response Example:**


```json
{
   "data": [
       {
           "identifier": 336,
           "type": "cards_local",
           "title": "Argencard",
           "logo": "https://payop.com/assets/images/payment_methods/argencard.jpg",
           "currencies": ["USD"],
           "countries": ["AR"],
           "config": {
               "fields": [
                   {
                       "name": "email",
                       "type": "email",
                       "required": true
                   },
                   {
                       "name": "name",
                       "type": "text",
                       "required": true
                   },
                   {
                       "name": "nationalid",
                       "type": "text",
                       "required": true
                   }
               ]
           }
       }
   ],
   "status": 1
}

```


#### **Error Response Example (Invalid Token):**


```json
{
 "message": "Authorization token invalid"
}
```
